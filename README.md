#calabash-page-objects
=====================
An internal repo for the calabash page object gem.

The calabash page object gem has two base classes that can be inherited by your page objects to provide you with stock methods for your defined elements.  One is for iOS, the other is for android.

For example defining an element using calabashpageobjects `element` method will provide you with methods to wait for the element, click the element, retrieve some properties of the element etc.

#Using the base classes

To use the gem from the internal gem server add

`source 'http://gems.ict.je-labs.com:8808'`
to the top of your gemfile and add

`gem 'calabashpageobjects'`

##Android
To use the android framework, have your page objects require calabash-android first, then the framework, then have the page object inherit the android base class.
```
require 'calabash-android'
require 'CalabashPageObjects'
class PageObjectClass < CalabashAndroidBase
```
##iOS
To use the iOS framework, have your page objects require calabash-cucumber first, then the framework, then have the page object inherit the ios base class.
```
require 'calabash-cucumber'
require 'CalabashPageObjects'
class PageObjectClass < CalabashIosBase
```

#Declaring elements

After defining an element with a unique name and a calabash query string that returns the element, the gem generates methods for interacting with that element.  Usage:

`element(:element_name, "* text:'Hello'")`

#Methods 
Before discussing the methods that are generated by the element method there are a few concepts to understand.

###Parent Elements
Most of the generated methods contain optional functionality to search the screen for your element.  This is useful in cases where your element may not be visible on the screen.  By default calabash scrolls down the first scrollable element that it finds, which isn't always the required functionality.  In these cases it is necessary to specify the parent element that you want to scroll through to find your element.

For example the `touch_ELEMENT_NAME` method will scroll through the screen to find your element and then tap it.  To make calabash scroll through a non default scrollable view you can pass a calabash query string as an argument.

`touch_ELEMENT_NAME(parent: action_bar_locator)`

######Best Practice
In the example above, rather than passing in the calabash locator as a hardcoded string (e.g. "* text:'Hello'"), the ELEMENT_NAME_locator method has been used.  It is best practice not to have hardcoded strings strewn througout your page objects.  To achieve this you should define the parent object in the same way as your other elements and use the ELEMENT_NAME_locator method to return the string.

###Arguments
All of the generated methods take options as a hash.  Many of the methods that are generated have defaults set for some of their arguments, as in many cases these don't need to be changed.  To override these arguments and to pass in other arguments, parameters are supplied as a hash. Some examples:

The method ELEMENT_NAME_text can accept values for the timeout for the element to appear, whether the element you want is inside a parent element and whether the element is in a webview.  The defaults for these values are as follows
```
timeout: 1
parent: nil
webview: false
```
so to run the method for an element that should be visible inside of 1 second, that is not inside a parent element and is not inside a webview, the defaults can be used.

`ELEMENT_NAME_text`

but to run the method for an element that should be present inside of 10 seconds and is in a webview some defaults need to be overridden.

`ELEMENT_NAME_text({timeout: 10, webview: true})`

#####Shorthand
As for many screens the only argument passed to most methods will be a timeout, there is a shorthand for passing in only a timeout to  method.  If the only argument passed in is an integer, then it is assumed that it is a timeout and all other arguments are left as default.

So to run the ELEMENT_NAME_text method with defaults values for whether the element is in a webview, or inside a parent element, but to extend the timeout from the default of 1 second to 15 seconds you can call
`ELEMENT_NAME_text(15)`
which is equivalent to 
`ELEMENT_NAME_text(timeout:15)`

###Generated Methods

####element_name_when_present
Waits for an element to be present on the screen.
######Args
Can take an argument for `timeout`.  Default is 10 seconds.

####element_name_when_not_present
Waits for an element to not be present.
######Args
Can take an argument for `timeout`.  Default is 10 seconds.

####element_name_is_present?
Checks to see is an element is present on the screen and returns a boolean value.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####touch_element_name
This method taps the element.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####input_element_name
This method clears the text in an element and then enters the text that is passed in.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Always takes an argument for the `value` to enter into the element.
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.
#####Examples
`input_element_name('My string')` if you want to use the default options.
`input_element_name('My string', {timeout: 15, webview: true})` if you want to override the defaults.

####check_element_name
This method will check a checkbox element.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.
####uncheck_element_name
This method will uncheck a checkbox element.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####element_name_is_checked?
This method will look to see is a checkbox element is checked or not and return a boolean.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####element_name_text
This method retrieve the text attribute of an element.

This method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####look_for_element_name
This method looks through a screen to find an element.  By definition this method will scroll through the screen to try to locate your element if it isn't visible at the end of the timeout.
######Args
Can take an argument for `timeout`.  Default is 1 second.
Can take an argument for `parent`. Default is nil.
Can take an argument for `webview`. Default is false.

####element_name_locator
Will return the calabash query string that was provided when the element was defined.
######Args
This method doesn't take any options.

##Logging
If a constant called `CPO_LOGGING` has been set to true, additional logging information will be printed to the console as methods are being executed.  By default it is initialised to false.


